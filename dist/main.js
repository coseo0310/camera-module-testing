"use strict";var __awaiter=function(e,c,l,r){return new(l=l||Promise)(function(n,t){function i(e){try{a(r.next(e))}catch(e){t(e)}}function o(e){try{a(r.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(i,o)}a((r=r.apply(e,c||[])).next())})};const canvas=document.querySelector("#canvas"),ctx=canvas.getContext("2d"),video=document.querySelector("#video"),label1=document.querySelector("#label1"),label2=document.querySelector("#label2"),label3=document.querySelector("#label3"),label4=document.querySelector("#label4"),label5=document.querySelector("#label5"),label6=document.querySelector("#label6"),btn=document.querySelector("button");let width=window.innerWidth,height=window.innerHeight,cnt=0;video.addEventListener("canplaythrough",()=>{canvas.width=width,canvas.height=height}),window.addEventListener("resize",e=>__awaiter(void 0,void 0,void 0,function*(){setDevice()})),btn.addEventListener("click",()=>{console.log("clcik?"),capture()});const isMobile=navigator.userAgent.toLocaleLowerCase().includes("mobile");function setDevice(){return __awaiter(this,void 0,void 0,function*(){try{var e={audio:!1,video:{facingMode:"environment"}},t={audio:!1,video:!0};const o=yield navigator.mediaDevices.getUserMedia(isMobile?e:t);var n=(video.srcObject=o).getVideoTracks()[0],i=(label6.innerHTML=`ID: ${n.id} label: ${n.label} enabled: `+n.enabled,console.log(n),o.getVideoTracks()[0].getSettings());width=i.width,height=i.height,label5.innerHTML="",label2.innerText=`${width}, ${height} - `+cnt++,console.log("stream",width,height)}catch(e){console.error(e),label5.innerHTML=e}})}function capture(){ctx.drawImage(video,0,0,width,height)}label1.innerText=` ${navigator.userAgent}, `+isMobile,window.onload=()=>__awaiter(void 0,void 0,void 0,function*(){setDevice()});
