"use strict";var __awaiter=function(e,a,d,r){return new(d=d||Promise)(function(i,t){function n(e){try{c(r.next(e))}catch(e){t(e)}}function o(e){try{c(r.throw(e))}catch(e){t(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof d?t:new d(function(e){e(t)})).then(n,o)}c((r=r.apply(e,a||[])).next())})};const canvas=document.querySelector("#canvas"),ctx=canvas.getContext("2d"),video=document.querySelector("#video"),btn1=document.querySelector(".capture"),btn2=document.querySelector(".clear");let width=window.innerWidth,height=window.innerHeight,rotate="horizontal";video.addEventListener("canplaythrough",()=>{canvas.width=width,canvas.height=height}),window.addEventListener("resize",e=>__awaiter(void 0,void 0,void 0,function*(){width=window.innerWidth,height=window.innerHeight;let e;(e=width>height?"horizontal":"vertical")!==rotate&&setDevice()})),btn1.addEventListener("click",()=>{console.log("clcik?"),capture()}),btn2.addEventListener("click",()=>{console.log("clcik?"),clear()});const isMobile=navigator.userAgent.toLocaleLowerCase().includes("mobile");function setDevice(){return __awaiter(this,void 0,void 0,function*(){try{var e={audio:!1,video:{facingMode:"environment",width:1280,height:720}},t={audio:!1,video:{width:1920,height:1080}};const i=yield navigator.mediaDevices.getUserMedia(isMobile?e:t);video.height=height;(video.srcObject=i).getVideoTracks()[0]}catch(e){console.error(e)}})}function capture(){console.log(video.width,height),canvas.width=height/.5625,canvas.height=height,ctx.drawImage(video,0,0,height/.5625,height)}function clear(){ctx.clearRect(0,0,canvas.width,canvas.height)}window.onload=()=>__awaiter(void 0,void 0,void 0,function*(){setDevice()});
