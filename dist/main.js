"use strict";var __awaiter=function(e,r,l,c){return new(l=l||Promise)(function(i,t){function n(e){try{a(c.next(e))}catch(e){t(e)}}function o(e){try{a(c.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(n,o)}a((c=c.apply(e,r||[])).next())})};const canvas=document.querySelector("#canvas"),ctx=canvas.getContext("2d"),video=document.querySelector("#video"),label1=document.querySelector("#label1"),label2=document.querySelector("#label2"),label3=document.querySelector("#label3"),label4=document.querySelector("#label4"),label5=document.querySelector("#label5"),label6=document.querySelector("#label6");let width=window.innerWidth,height=window.innerHeight;video.addEventListener("canplaythrough",()=>{canvas.width=width,canvas.height=height}),window.addEventListener("resize",e=>{});const isMobile=navigator.userAgent.toLocaleLowerCase().includes("mobile");function getCameras(){return __awaiter(this,void 0,void 0,function*(){try{let t;const e=yield navigator.mediaDevices.enumerateDevices(),i=e.filter(e=>"videoinput"===e.kind);return i.forEach(e=>{(t=document.createElement("option")).value=e.deviceId,t.innerText=e.label}),label3.innerHTML=JSON.stringify(i),label4.innerHTML=t.value+" - "+t.innerText,i[0].deviceId}catch(e){console.error(e)}})}function setDevice(a){return __awaiter(this,void 0,void 0,function*(){console.log(getCameras());try{var e={audio:!1,video:{facingMode:"environment"}},t={audio:!1,video:{deviceId:{exact:a}}};const o=yield navigator.mediaDevices.getUserMedia(a?t:e);label5.innerHTML=`diviceID:: ${a}, `+!!a;var i=(video.srcObject=o).getVideoTracks()[0],n=(label6.innerHTML=`ID: ${i.id} label: `+i.label,console.log(i),o.getVideoTracks()[0].getSettings());width=n.width,height=n.height,label2.innerText=width+", "+height,console.log("stream",width,height)}catch(e){console.error(e),label5.innerHTML=e}})}label1.innerText=` ${navigator.userAgent}, `+isMobile,window.onload=()=>__awaiter(void 0,void 0,void 0,function*(){setDevice(yield getCameras())});
